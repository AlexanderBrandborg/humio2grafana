{"version":3,"sources":["../src/config_ctrl.js"],"names":["angular","_","HumioConfigCtrl","$scope","$injector","$q","$http","dataspaces","current","jsonData","humioToken","_getHumioDataspaces","ev","url","requestOpts","method","headers","then","r","data","map","ds","value","id","name","templateUrl"],"mappings":";;;;;;;;;;;;;;;AAAOA,a;;AACAC,O;;;;;;;;;;;;;;;;;;;;;iCAEMC,e;AACX;;AAEA;AACA,iCAAYC,MAAZ,EAAoBC,SAApB,EAA+BC,EAA/B,EAAmCC,KAAnC,EAA0C;AAAA;;AACxC,eAAKA,KAAL,GAAaA,KAAb;AACA,eAAKC,UAAL,GAAkB,EAAlB;AACA,eAAKC,OAAL,GAAe,KAAKA,OAAL,IAAgB,EAA/B;AACA,eAAKA,OAAL,CAAaC,QAAb,GAAwB,KAAKD,OAAL,CAAaC,QAAb,IAAyB,EAAjD;AACA,eAAKD,OAAL,CAAaC,QAAb,CAAsBC,UAAtB,GAAmC,KAAKF,OAAL,CAAaC,QAAb,CAAsBC,UAAtB,IAAoC,WAAvE;AACA,eAAKC,mBAAL;AACD;;;;uCAEYC,E,EAAI;AACf,iBAAKD,mBAAL;AACD;;;gDAEqB;AAAA;;AACpB,gBAAI,KAAKH,OAAL,CAAaK,GAAb,IAAoB,KAAKL,OAAL,CAAaC,QAAb,CAAsBC,UAA9C,EAA0D;AACxD,kBAAII,cAAc;AAChBC,wBAAQ,KADQ;AAEhBF,qBAAK,KAAKL,OAAL,CAAaK,GAAb,GAAmB,oBAFR;AAGhBG,yBAAS;AACP,mCAAiB,YAAY,KAAKR,OAAL,CAAaC,QAAb,CAAsBC;AAD5C;AAHO,eAAlB;AAOA,mBAAKJ,KAAL,CAAWQ,WAAX,EAAwBG,IAAxB,CAA6B,UAACC,CAAD,EAAO;AAClC,sBAAKX,UAAL,GAAkBW,EAAEC,IAAF,CAAOC,GAAP,CAAW,UAACC,EAAD,EAAQ;AACnC,yBAAQ;AACNC,2BAAOD,GAAGE,EADJ;AAENC,0BAAMH,GAAGE;AAFH,mBAAR;AAID,iBALiB,CAAlB;AAMD,eAPD;AAQD;AACF;;;;;;;;AAEHrB,sBAAgBuB,WAAhB,GAA8B,sBAA9B","file":"config_ctrl.js","sourcesContent":["import angular from 'angular';\nimport _ from 'lodash';\n\nexport class HumioConfigCtrl {\n  // current: any;\n\n  /** @ngInject */\n  constructor($scope, $injector, $q, $http) {\n    this.$http = $http;\n    this.dataspaces = [];\n    this.current = this.current || {};\n    this.current.jsonData = this.current.jsonData || {};\n    this.current.jsonData.humioToken = this.current.jsonData.humioToken || \"developer\";\n    this._getHumioDataspaces();\n  }\n\n  onTokenChage(ev) {\n    this._getHumioDataspaces();\n  }\n\n  _getHumioDataspaces() {\n    if (this.current.url && this.current.jsonData.humioToken) {\n      var requestOpts = {\n        method: 'GET',\n        url: this.current.url + '/api/v1/dataspaces',\n        headers: {\n          'Authorization': 'Bearer ' + this.current.jsonData.humioToken\n        }\n      };\n      this.$http(requestOpts).then((r) => {\n        this.dataspaces = r.data.map((ds) => {\n          return ({\n            value: ds.id,\n            name: ds.id\n          })\n        });\n      })\n    }\n  }\n}\nHumioConfigCtrl.templateUrl = 'partials/config.html';\n"]}